var u=Object.defineProperty;var h=(i,o,t)=>o in i?u(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t;var r=(i,o,t)=>h(i,typeof o!="symbol"?o+"":o,t);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}})();function l(i){return new Promise(o=>{const t=getComputedStyle(i);if(t.animationName==="none"){o();return}const n=t.animationDuration.split(",").map(c=>(c=c.trim(),c.endsWith("ms")?parseFloat(c):parseFloat(c)*1e3)),e=Math.max(...n,0);if(e===0){o();return}let s=!1;const a=c=>{c.target===i&&(s=!0,i.removeEventListener("animationend",a),o())};i.addEventListener("animationend",a),requestAnimationFrame(()=>{setTimeout(()=>{s||(i.removeEventListener("animationend",a),o())},e+50)})})}async function m(i){const o=Array.from(i.children);o.length!==0&&await Promise.all(o.map(n=>l(n)))}class g extends HTMLElement{constructor(){super(...arguments);r(this,"isDragging",!1);r(this,"startY",0);r(this,"currentY",0);r(this,"scrollThreshold",20);r(this,"onMouseDown",t=>this.startDrag(t.clientY));r(this,"onMouseMove",t=>this.drag(t.clientY));r(this,"onMouseUp",()=>this.endDrag());r(this,"onTouchStart",t=>this.startDrag(t.touches[0].clientY));r(this,"onTouchMove",t=>{this.isDragging&&(t.preventDefault(),this.drag(t.touches[0].clientY))});r(this,"onTouchEnd",()=>this.endDrag())}get name(){return this.getAttribute("name")}get variant(){return this.getAttribute("variant")}get content(){return this.querySelector("[data-app-dialog=content]")}connectedCallback(){const t=this.firstElementChild;if(!t||!this.name)throw new Error("Dialog is not valid.");t.addEventListener("click",n=>{n.target instanceof HTMLElement&&(n.target===this.querySelector("[data-app-dialog=overlay]")||n.target.getAttribute("data-app-dialog")==="close")&&this.close()}),t.addEventListener("cancel",n=>{n.preventDefault(),this.close()})}open(){this.variant==="drawer"&&this.addDragEvents();const t=this.firstElementChild,n=this.querySelector("[data-app-dialog=overlay]"),e=this.querySelector("[data-app-dialog=content]");t.showModal(),n&&(n.setAttribute("data-state","opening"),l(n).then(()=>{n.setAttribute("data-state","active")})),e&&(e.setAttribute("data-state","opening"),l(e).then(()=>{e.setAttribute("data-state","active")}))}async close(){this.variant==="drawer"&&this.removeDragEvents();const t=this.firstElementChild,n=this.querySelector("[data-app-dialog=overlay]"),e=this.querySelector("[data-app-dialog=content]");n&&(n.setAttribute("data-state","closing"),l(n).then(()=>{n.removeAttribute("data-state")})),e&&(e.setAttribute("data-state","closing"),l(e).then(()=>{e.removeAttribute("data-state")})),await m(t),t.close()}addDragEvents(){this.content.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),this.content.addEventListener("touchstart",this.onTouchStart),document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onTouchEnd)}removeDragEvents(){this.content.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),this.content.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd)}startDrag(t){this.isDragging=!0,this.startY=t}drag(t){if(!this.isDragging)return;this.currentY=t;const n=this.currentY-this.startY;n<0||(this.content.style.transition="none",Math.abs(n)>this.scrollThreshold&&(console.log(`translate(0, ${Math.min(n,200)}px)`),this.content.style.transform=`translate(0, ${Math.min(n,200)}px)`))}endDrag(){this.isDragging&&(this.isDragging=!1,this.currentY>window.innerHeight*.7?this.close().then(()=>{this.content.style.transition="none",this.content.style.transform=""}):(this.content.style.transition="transform 150ms",this.content.style.transform="translate(0, 0)"),this.currentY=0,this.startY=0)}}class f extends HTMLElement{get target(){return this.getAttribute("target")}connectedCallback(){const o=this.firstElementChild;!o||!this.target||o.addEventListener("click",()=>{const t=document.querySelector(`app-dialog[name=${this.target}]`);t&&(t.hasAttribute("open")?t.close():t.open())})}}customElements.define("app-dialog",g);customElements.define("app-dialog-trigger",f);let d=localStorage.getItem("app-theme")||"dark";document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("themeToggler");document.documentElement.classList.remove("dark","light"),document.documentElement.classList.add(d),i.addEventListener("click",()=>{document.documentElement.classList.remove(d),d=d==="dark"?"light":"dark",document.documentElement.classList.add(d),localStorage.setItem("app-theme",d)})});
